<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Furniture</title>
    <link rel="stylesheet" href="/category.css">
</head>
<body>
    <div class="top">
        <div class="search">
            <input type="text" placeholder="Search">
            <i class="fa-solid fa-magnifying-glass"></i>
        </div>
        <div class="icon">
            <img src="/logo-black-removebg-preview.png" alt="ESELL" style="width: 105px; height: 60px; margin-top: -90px; margin-left: 50px;">
        </div>
        <nav class="navbar">
            <ul class="navbar-list">
              <li><a href="/main2.html">Home</a></li>
            </ul>
          </nav>
    </div>
    <div class="box">
        <h5 class="category">FURNITURE</h5> 
        <div class="image">
            <img src="/Furniture.jpeg" style="height: 178px;width: 298px;">
        </div>    
    </div>
   <div class="bottom">
        <section class="products">
            <div class="all-products" id="productContainer">
                <!-- Product placeholders -->
            </div>
        </section>
        <div class="side">
            <h2 style="background: none; text-align: center;padding-top: 20px;">SHOP BY CATEGORY</h2>
            <a href="/furniture.html">FURNITURE</a>
            <a href="/vehicle.html">VEHICLE</a>
            <a href="/fashion.html">FASHION</a>
            <a href="/fruits_vegi.html">FRUITS AND VEGETABLES</a>
            <a href="/electronics.html">ELECTRONICS</a>
            <a href="/Artwork.html">ART WORK</a>
            <a href="/other.html">OTHER</a>
        </div>
    </div>

    <script>
                function displayProductDetails(products) {
            const productContainer = document.getElementById('productContainer');

            products.forEach((product) => {
                if (product.category === selectedCategory) {
                const productDiv = document.createElement('div');
                productDiv.classList.add('product');
                <!-- Inside the displayProductDetails() function in the HTML file -->

  // Create a link to the product details page
                const productLink = document.createElement("a");
                productLink.href = `/pdetails.html?id=${product._id}`; // Pass the product ID as a query parameter
                productLink.appendChild(productDiv);
                productContainer.appendChild(productLink);

                const productImage = document.createElement('img');
                productImage.src = product.image;

                const productInfoDiv = document.createElement('div');
                productInfoDiv.classList.add('product-info');

                const productName = document.createElement('h4');
                productName.classList.add('product-title');
                productName.textContent = product.name;

                const productPrice = document.createElement('p');
                productPrice.classList.add('product-price');
                productPrice.textContent = 'Price: ' + product.price;

                const bidButton = document.createElement('button');
                bidButton.classList.add('product-btn');
                bidButton.textContent = 'Bid Now';

                bidButton.addEventListener('click', () => {
                    window.location.href = '/pdetails.html?id=' + product._id;

                console.log('Bid Now button clicked for product:', product.name);
                });
            
                productInfoDiv.appendChild(productName);
                productInfoDiv.appendChild(productPrice);
                productDiv.appendChild(productImage);
                productDiv.appendChild(productInfoDiv);
                productInfoDiv.appendChild(bidButton);
                productContainer.appendChild(productDiv);
        }
            });
        }
        async function fetchProductDetails(selectedCategory) {
  try {
    const response = await fetch('http://localhost:3000/products');
    const products = await response.json();

    if (response.ok) {
      displayProductDetails(products, selectedCategory);
    } else {
      console.error('Error fetching product details:', products.error);
    }
  } catch (error) {
    console.error('Error fetching product details:', error);
  }
}


// Example usage: Fetch and display products with category "Electronics"
        const selectedCategory = 'Furniture';
        fetchProductDetails(selectedCategory);

    </script>
</body>

</html>
